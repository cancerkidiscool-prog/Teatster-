repeat
    wait()
until game:IsLoaded()

local library = {
    flags = {},
    -- Premium Palette: Deep Gunmetal & Royal Violet
    colors = {
        main = Color3.fromRGB(12, 12, 16),       -- Deepest Background
        secondary = Color3.fromRGB(20, 20, 26),   -- Element Background
        tertiary = Color3.fromRGB(28, 28, 35),    -- Hover State
        accent = Color3.fromRGB(148, 86, 255),    -- Primary Violet
        accent_dim = Color3.fromRGB(98, 46, 195), -- Dimmed Violet
        text = Color3.fromRGB(235, 235, 245),    -- White-ish
        text_sub = Color3.fromRGB(150, 150, 160), -- Grey
        border = Color3.fromRGB(45, 45, 55),      -- Outer Border
        border_light = Color3.fromRGB(65, 65, 80) -- Highlight Border
    },
    font = Enum.Font.Gotham,
    fontsub = Enum.Font.Gotham,
}

local services = setmetatable({}, {
    __index = function(_, service)
        return game:GetService(service)
    end
})

local utility = {}

-- Improved Creation Helper
function utility.create(class, properties)
    local obj = Instance.new(class)
    for prop, v in next, properties do
        obj[prop] = v
    end
    return obj
end

-- Gradient Helper
function utility.gradient(colors, rot)
    rot = rot or 0
    local colortbl = {}
    for i, color in next, colors do
        table.insert(colortbl, ColorSequenceKeypoint.new((i - 1) / (#colors - 1), color))
    end
    local grad = Instance.new("UIGradient")
    grad.Color = ColorSequence.new(colortbl)
    grad.Rotation = rot
    return grad
end

-- Tween Helper
function utility.tween(obj, info, props)
    local tween = services.TweenService:Create(obj, TweenInfo.new(unpack(info)), props)
    tween:Play()
    return tween
end

-- Roundness Helper
function utility.round(obj, px)
    local corner = obj:FindFirstChildOfClass("UICorner")
    if not corner then
        corner = Instance.new("UICorner", obj)
    end
    corner.CornerRadius = UDim.new(0, px)
    return corner
end

-- Stroke Helper (Double Layer for Depth)
function utility.stroke(obj, color, thickness, transparency)
    transparency = transparency or 0
    local stroke = Instance.new("UIStroke")
    stroke.Color = color
    stroke.Thickness = thickness
    stroke.Transparency = transparency
    stroke.Parent = obj
    return stroke
end

-- Dragify
function utility.dragify(object, inputFrame)
    local dragging, dragInput, dragStart, startPos
    local targetInput = inputFrame or object

    targetInput.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = object.Position

            local connection
            connection = input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                    connection:Disconnect()
                end
            end)
        end
    end)
    targetInput.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)
    services.UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            object.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
end

-- Notify System
local notifyHolder = game:GetService("CoreGui"):FindFirstChild("ZalNotifyHolder")
if not notifyHolder then
    notifyHolder = utility.create("ScreenGui", {
        Name = "ZalNotifyHolder",
        Parent = game:GetService("CoreGui"),
        ResetOnSpawn = false,
        IgnoreGuiInset = true,
        ZIndex = 1000
    })
    utility.create("UIListLayout", {
        Parent = notifyHolder,
        Padding = UDim.new(0, 10),
        SortOrder = Enum.SortOrder.LayoutOrder,
        VerticalAlignment = Enum.VerticalAlignment.Bottom,
        HorizontalAlignment = Enum.HorizontalAlignment.Right
    })
    utility.create("UIPadding", {
        Parent = notifyHolder,
        PaddingBottom = UDim.new(0, 20),
        PaddingRight = UDim.new(0, 20)
    })
end

function library:Notify(options)
    if not notifyHolder then return end
    
    -- Glass Background
    local bg = utility.create("Frame", {
        Name = "Notify",
        Size = UDim2.new(0, 320, 0, 0),
        BackgroundColor3 = Color3.fromRGB(18, 18, 22),
        BorderSizePixel = 0,
        Parent = notifyHolder,
        AnchorPoint = Vector2.new(1, 1),
        Position = UDim2.new(1, 50, 1, 0)
    })
    bg.AutomaticSize = Enum.AutomaticSize.Y
    utility.round(bg, 8)
    utility.stroke(bg, library.colors.accent, 1, 0)

    -- Accent Strip
    utility.create("Frame", {
        Size = UDim2.new(0, 4, 1, 0),
        Position = UDim2.new(0, 0, 0, 0),
        BackgroundColor3 = library.colors.accent,
        BorderSizePixel = 0,
        Parent = bg
    })
    
    -- Content
    local pad = utility.create("UIPadding", {Parent = bg, PaddingTop = UDim.new(0, 14), PaddingLeft = UDim.new(0, 14), PaddingBottom = UDim.new(0, 14), PaddingRight = UDim.new(0, 14)})
    local list = utility.create("UIListLayout", {Parent = bg, Padding = UDim.new(0, 6)})

    utility.create("TextLabel", {
        Size = UDim2.new(1, 0, 0, 0),
        BackgroundTransparency = 1,
        Text = options.Title or "Notification",
        TextColor3 = library.colors.accent,
        TextSize = 15,
        Font = library.font,
        TextXAlignment = Enum.TextXAlignment.Left,
        AutomaticSize = Enum.AutomaticSize.Y,
        Parent = bg
    })

    utility.create("TextLabel", {
        Size = UDim2.new(1, 0, 0, 0),
        BackgroundTransparency = 1,
        Text = options.Content or "Message",
        TextColor3 = library.colors.text_sub,
        TextSize = 13,
        Font = library.fontsub,
        TextXAlignment = Enum.TextXAlignment.Left,
        TextWrapped = true,
        AutomaticSize = Enum.AutomaticSize.Y,
        Parent = bg
    })

    -- Animate In
    utility.tween(bg, {0.5, Enum.EasingStyle.Quart}, {Position = UDim2.new(1, -10, 1, 0)})

    -- Remove
    task.spawn(function()
        wait(options.Duration or 4)
        utility.tween(bg, {0.5, Enum.EasingStyle.Quart}, {Position = UDim2.new(1, 50, 1, 0)})
        wait(0.5)
        bg:Destroy()
    end)
end

function library:Window(name)
    local gui = utility.create("ScreenGui", {
        Name = "ZalHub",
        Parent = game:GetService("CoreGui"),
        ResetOnSpawn = false
    })

    -- Main Container
    local main = utility.create("Frame", {
        Name = "Main",
        Size = UDim2.new(0, 700, 0, 550),
        Position = UDim2.new(0.5, -350, 0.5, -275),
        BackgroundColor3 = library.colors.main,
        BorderSizePixel = 0,
        Parent = gui,
        ClipsDescendants = true
    })
    utility.round(main, 12)

    -- Outer Glow Border (Simulated)
    local outerBorder = utility.create("Frame", {
        Size = UDim2.new(1, 6, 1, 6),
        Position = UDim2.new(0, -3, 0, -3),
        BackgroundColor3 = library.colors.accent,
        BorderSizePixel = 0,
        Parent = main,
        ZIndex = 0
    })
    utility.round(outerBorder, 14)
    outerBorder.BackgroundTransparency = 0.85

    -- Top Bar (Header)
    local top = utility.create("Frame", {
        Size = UDim2.new(1, 0, 0, 55),
        BackgroundColor3 = library.colors.secondary,
        BorderSizePixel = 0,
        ZIndex = 2,
        Parent = main
    })
    utility.round(top, 12)
    -- Mask bottom of top bar to make it look attached
    local topMask = utility.create("Frame", {
        Size = UDim2.new(1, 0, 0.5, 0),
        Position = UDim2.new(0, 0, 0.5, 0),
        BackgroundColor3 = library.colors.secondary,
        BorderSizePixel = 0,
        ZIndex = 2,
        Parent = top
    })
    
    -- Title Area
    local titleArea = utility.create("Frame", {
        Size = UDim2.new(1, 0, 1, 0),
        BackgroundTransparency = 1,
        ZIndex = 3,
        Parent = top
    })
    utility.create("TextLabel", {
        Size = UDim2.new(1, -140, 1, 0),
        Position = UDim2.new(0, 20, 0, 0),
        BackgroundTransparency = 1,
        Text = name,
        TextColor3 = library.colors.text,
        TextSize = 18,
        Font = library.font,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 3,
        Parent = titleArea
    })
    
    -- Keybind Hint
    utility.create("TextLabel", {
        Size = UDim2.new(0, 100, 0, 20),
        Position = UDim2.new(1, -120, 1, -22),
        BackgroundTransparency = 1,
        Text = "[Right Shift]",
        TextColor3 = library.colors.text_sub,
        TextSize = 11,
        Font = library.fontsub,
        ZIndex = 3,
        Parent = titleArea
    })

    -- Toggle Button (Watermark style)
    local wm = utility.create("ScreenGui", {
        Name = "Zal_WM", Parent = game:GetService("CoreGui"), ResetOnSpawn = false, DisplayOrder = 999
    })
    local wmBtn = utility.create("TextButton", {
        Size = UDim2.new(0, 130, 0, 36),
        Position = UDim2.new(0, 20, 0, 20),
        BackgroundColor3 = library.colors.main,
        Text = name,
        TextColor3 = library.colors.accent,
        Font = library.font, TextSize = 14,
        Parent = wm
    })
    utility.round(wmBtn, 8)
    utility.stroke(wmBtn, library.colors.accent, 1)

    local wmOpen = true
    wmBtn.MouseButton1Click:Connect(function()
        wmOpen = not wmOpen
        main.Visible = wmOpen
        wmBtn.TextColor3 = wmOpen and library.colors.accent or library.colors.text_sub
        utility.stroke(wmBtn, wmOpen and library.colors.accent or library.colors.border)
    end)
    
    services.UserInputService.InputBegan:Connect(function(i, gp)
        if not gp and i.KeyCode == Enum.KeyCode.RightShift then
            wmBtn.MouseButton1Click:Fire()
        end
    end)
    utility.dragify(wmBtn, wmBtn)

    -- Tab Holder
    local tabsHolder = utility.create("Frame", {
        Size = UDim2.new(1, -240, 1, 0),
        Position = UDim2.new(0, 130, 0, 0),
        BackgroundTransparency = 1,
        ZIndex = 4,
        Parent = top
    })
    local tabsLayout = utility.create("UIListLayout", {
        FillDirection = Enum.FillDirection.Horizontal,
        Padding = UDim.new(0, 5),
        SortOrder = Enum.SortOrder.LayoutOrder,
        VerticalAlignment = Enum.VerticalAlignment.Center,
        Parent = tabsHolder
    })

    -- Content Area
    local content = utility.create("Frame", {
        Size = UDim2.new(1, -20, 1, -75),
        Position = UDim2.new(0, 10, 0, 65),
        BackgroundTransparency = 1,
        ZIndex = 1,
        Parent = main
    })

    utility.dragify(main, top)

    local currentTab = nil

    local windowAPI = {}

    function windowAPI:Tab(tabName)
        local tabBtn = utility.create("TextButton", {
            Size = UDim2.new(0, 0, 0, 30),
            AutomaticSize = Enum.AutomaticSize.X,
            BackgroundTransparency = 1,
            Text = "  "..tabName.."  ",
            TextColor3 = library.colors.text_sub,
            TextSize = 14,
            Font = library.font,
            TextXAlignment = Enum.TextXAlignment.Center,
            ZIndex = 5,
            Parent = tabsHolder
        })
        
        local indicator = utility.create("Frame", {
            Size = UDim2.new(0, 0, 0, 2),
            Position = UDim2.new(0.5, 0, 1, 0),
            AnchorPoint = Vector2.new(0.5, 0),
            BackgroundColor3 = library.colors.accent,
            BorderSizePixel = 0,
            ZIndex = 5,
            Parent = tabBtn
        })
        utility.round(indicator, 2)

        local page = utility.create("ScrollingFrame", {
            Size = UDim2.new(1, 0, 1, 0),
            BackgroundColor3 = Color3.fromRGB(255,255,255), -- Visible for debugging but will cover
            BackgroundTransparency = 1,
            Visible = false,
            ScrollBarThickness = 4,
            ScrollBarImageColor3 = library.colors.border_light,
            Parent = content
        })
        page.ScrollingDirection = Enum.ScrollingDirection.Y

        local list = utility.create("UIListLayout", {
            FillDirection = Enum.FillDirection.Vertical,
            Padding = UDim.new(0, 12),
            Parent = page
        })
        local pad = utility.create("UIPadding", {Parent = page, PaddingTop = UDim.new(0, 10), PaddingLeft = UDim.new(0, 10), PaddingRight = UDim.new(0, 10), PaddingBottom = UDim.new(0, 10)})

        list:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
            page.CanvasSize = UDim2.new(0, 0, 0, list.AbsoluteContentSize.Y + 20)
        end)

        local function select()
            if currentTab then
                currentTab.Page.Visible = false
                utility.tween(currentTab.Btn, {0.3}, {TextColor3 = library.colors.text_sub})
                utility.tween(currentTab.Ind, {0.3}, {Size = UDim2.new(0, 0, 0, 2)})
            end
            page.Visible = true
            utility.tween(tabBtn, {0.3}, {TextColor3 = library.colors.text})
            utility.tween(indicator, {0.3}, {Size = UDim2.new(1, -10, 0, 2)})
            
            currentTab = {Btn = tabBtn, Page = page, Ind = indicator}
        end

        tabBtn.MouseButton1Click:Connect(select)
        if not currentTab then select() end

        local tabAPI = {}

        function tabAPI:Section(secName)
            local section = utility.create("Frame", {
                BackgroundColor3 = library.colors.secondary,
                Size = UDim2.new(1, 0, 0, 0),
                AutomaticSize = Enum.AutomaticSize.Y,
                Parent = page
            })
            utility.round(section, 10)
            utility.stroke(section, library.colors.border, 1, 0.9)

            utility.create("TextLabel", {
                Size = UDim2.new(1, -20, 0, 32),
                Position = UDim2.new(0, 10, 0, 0),
                BackgroundTransparency = 1,
                Text = secName,
                TextColor3 = library.colors.text_sub,
                TextSize = 13,
                Font = library.fontsub,
                TextXAlignment = Enum.TextXAlignment.Left,
                Parent = section
            })

            local container = utility.create("Frame", {
                Size = UDim2.new(1, 0, 0, 0),
                Position = UDim2.new(0, 0, 0, 32),
                BackgroundTransparency = 1,
                AutomaticSize = Enum.AutomaticSize.Y,
                Parent = section
            })
            local contList = utility.create("UIListLayout", {
                Padding = UDim.new(0, 8),
                Parent = container
            })
            local contPad = utility.create("UIPadding", {
                Parent = container,
                PaddingLeft = UDim.new(0, 12),
                PaddingRight = UDim.new(0, 12),
                PaddingBottom = UDim.new(0, 12)
            })
            contList:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
                section.Size = UDim2.new(1, 0, 0, contList.AbsoluteContentSize.Y + 44)
            end)

            local secAPI = {}

            -- TOGGLE: Pill style with Checkmark
            function secAPI:Toggle(text, flag, callback)
                local tFrame = utility.create("Frame", {
                    Size = UDim2.new(1, 0, 0, 30),
                    BackgroundTransparency = 1,
                    Parent = container
                })

                local btn = utility.create("TextButton", {
                    Size = UDim2.new(0, 20, 0, 20),
                    Position = UDim2.new(0, 0, 0.5, -10),
                    BackgroundColor3 = library.colors.tertiary,
                    Text = "",
                    ZIndex = 2,
                    Parent = tFrame
                })
                utility.round(btn, 5)
                utility.stroke(btn, library.colors.border, 1, 0.5)

                local check = utility.create("Frame", {
                    Size = UDim2.new(0, 10, 0, 10),
                    Position = UDim2.new(0.5, -5, 0.5, -5),
                    BackgroundColor3 = library.colors.accent,
                    Visible = false,
                    Parent = btn
                })
                utility.round(check, 2)

                utility.create("TextLabel", {
                    Size = UDim2.new(1, -30, 1, 0),
                    Position = UDim2.new(0, 30, 0, 0),
                    BackgroundTransparency = 1,
                    Text = text,
                    TextColor3 = library.colors.text,
                    TextSize = 14,
                    Font = library.fontsub,
                    TextXAlignment = Enum.TextXAlignment.Left,
                    Parent = tFrame
                })

                -- Hover effect
                btn.MouseEnter:Connect(function() utility.tween(btn, {0.2}, {BackgroundColor3 = Color3.fromRGB(40,40,50)}) end)
                btn.MouseLeave:Connect(function() utility.tween(btn, {0.2}, {BackgroundColor3 = library.colors.tertiary}) end)

                local state = false
                btn.MouseButton1Click:Connect(function()
                    state = not state
                    check.Visible = state
                    library.flags[flag] = state
                    if state then
                        utility.stroke(btn, library.colors.accent, 1)
                    else
                        utility.stroke(btn, library.colors.border, 1, 0.5)
                    end
                    callback(state)
                end)
            end

            -- BUTTON: Gradient style
            function secAPI:Button(text, callback)
                local btn = utility.create("TextButton", {
                    Size = UDim2.new(1, 0, 0, 32),
                    BackgroundColor3 = library.colors.tertiary,
                    Text = text,
                    TextColor3 = library.colors.text,
                    Font = library.font, TextSize = 14,
                    Parent = container
                })
                utility.round(btn, 6)
                utility.stroke(btn, library.colors.border, 1, 0.8)

                btn.MouseEnter:Connect(function()
                    utility.tween(btn, {0.2}, {BackgroundColor3 = Color3.fromRGB(50,50,65)})
                    utility.stroke(btn, library.colors.border_light, 1)
                end)
                btn.MouseLeave:Connect(function()
                    utility.tween(btn, {0.2}, {BackgroundColor3 = library.colors.tertiary})
                    utility.stroke(btn, library.colors.border, 1, 0.8)
                end)
                btn.MouseButton1Click:Connect(function()
                    utility.tween(btn, {0.1}, {Size = UDim2.new(1, 0, 0, 28)}) -- Click effect
                    wait(0.1)
                    utility.tween(btn, {0.1}, {Size = UDim2.new(1, 0, 0, 32)})
                    callback()
                end)
            end

            -- SLIDER: With Knob
            function secAPI:Slider(text, flag, min, max, def, callback)
                local sFrame = utility.create("Frame", {
                    Size = UDim2.new(1, 0, 0, 45),
                    BackgroundTransparency = 1,
                    Parent = container
                })

                local header = utility.create("Frame", {
                    Size = UDim2.new(1, 0, 0, 20),
                    BackgroundTransparency = 1,
                    Parent = sFrame
                })
                utility.create("TextLabel", {
                    Size = UDim2.new(0.5, 0, 1, 0),
                    Position = UDim2.new(0, 0, 0, 0),
                    BackgroundTransparency = 1,
                    Text = text,
                    TextColor3 = library.colors.text,
                    Font = library.fontsub, TextSize = 13,
                    TextXAlignment = Enum.TextXAlignment.Left,
                    Parent = header
                })
                local valLabel = utility.create("TextLabel", {
                    Size = UDim2.new(0.5, 0, 1, 0),
                    Position = UDim2.new(0.5, 0, 0, 0),
                    BackgroundTransparency = 1,
                    Text = tostring(def),
                    TextColor3 = library.colors.accent,
                    Font = library.font, TextSize = 13,
                    TextXAlignment = Enum.TextXAlignment.Right,
                    Parent = header
                })

                local track = utility.create("TextButton", {
                    Size = UDim2.new(1, 0, 0, 10),
                    Position = UDim2.new(0, 0, 1, -10),
                    BackgroundColor3 = library.colors.main,
                    Text = "",
                    ZIndex = 2,
                    Parent = sFrame
                })
                utility.round(track, 5)
                utility.stroke(track, library.colors.border, 1, 0.5)

                local fill = utility.create("Frame", {
                    Size = UDim2.new((def-min)/(max-min), 0, 1, 0),
                    BackgroundColor3 = library.colors.accent,
                    BorderSizePixel = 0,
                    ZIndex = 3,
                    Parent = track
                })
                utility.round(fill, 5)
                local grad = utility.gradient({library.colors.accent_dim, library.colors.accent}, 90)
                grad.Parent = fill

                local knob = utility.create("Frame", {
                    Size = UDim2.new(0, 16, 0, 16),
                    Position = UDim2.new((def-min)/(max-min), -8, 0.5, 0),
                    AnchorPoint = Vector2.new(0, 0.5),
                    BackgroundColor3 = Color3.fromRGB(255,255,255),
                    BorderSizePixel = 0,
                    ZIndex = 4,
                    Parent = track
                })
                utility.round(knob, 8)
                utility.stroke(knob, library.colors.accent, 2)

                local function set(val)
                    local clamped = math.clamp(val, min, max)
                    local perc = (clamped - min) / (max - min)
                    utility.tween(fill, {0.15}, {Size = UDim2.new(perc, 0, 1, 0)})
                    utility.tween(knob, {0.15}, {Position = UDim2.new(perc, -8, 0.5, 0)})
                    valLabel.Text = tostring(math.floor(clamped * 100) / 100)
                    library.flags[flag] = clamped
                    callback(clamped)
                end

                local dragging = false
                track.InputBegan:Connect(function(i)
                    if i.UserInputType == Enum.UserInputType.MouseButton1 then
                        dragging = true
                        set(min + (max - min) * ((i.Position.X - track.AbsolutePosition.X) / track.AbsoluteSize.X))
                    end
                end)
                services.UserInputService.InputChanged:Connect(function(i)
                    if dragging and i.UserInputType == Enum.UserInputType.MouseMovement then
                        set(min + (max - min) * ((i.Position.X - track.AbsolutePosition.X) / track.AbsoluteSize.X))
                    end
                end)
                services.UserInputService.InputEnded:Connect(function(i)
                    if i.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
                end)
            end

            -- DROPDOWN: With Arrow
            function secAPI:Dropdown(text, flag, list, callback)
                local dFrame = utility.create("Frame", {
                    Size = UDim2.new(1, 0, 0, 40),
                    BackgroundTransparency = 1,
                    Parent = container
                })
                
                utility.create("TextLabel", {
                    Size = UDim2.new(1, 0, 0, 20),
                    BackgroundTransparency = 1,
                    Text = text,
                    TextColor3 = library.colors.text_sub,
                    Font = library.fontsub, TextSize = 12,
                    TextXAlignment = Enum.TextXAlignment.Left,
                    Parent = dFrame
                })

                local btn = utility.create("TextButton", {
                    Size = UDim2.new(1, 0, 0, 32),
                    Position = UDim2.new(0, 0, 0, 20),
                    BackgroundColor3 = library.colors.tertiary,
                    Text = "Select...",
                    TextColor3 = library.colors.text,
                    Font = library.fontsub, TextSize = 14,
                    TextXAlignment = Enum.TextXAlignment.Left,
                    Parent = dFrame
                })
                utility.round(btn, 6)
                utility.stroke(btn, library.colors.border, 1, 0.8)

                -- Arrow
                local arrow = utility.create("TextLabel", {
                    Size = UDim2.new(0, 20, 1, 0),
                    Position = UDim2.new(1, -20, 0, 0),
                    BackgroundTransparency = 1,
                    Text = "v",
                    TextColor3 = library.colors.accent,
                    Font = library.font, TextSize = 14,
                    TextXAlignment = Enum.TextXAlignment.Center,
                    Parent = btn
                })

                -- Container
                local dropContainer = utility.create("Frame", {
                    Size = UDim2.new(1, 0, 0, 0),
                    Position = UDim2.new(0, 0, 1, 5),
                    BackgroundColor3 = library.colors.secondary,
                    BorderSizePixel = 0,
                    ZIndex = 5,
                    Parent = dFrame
                })
                utility.round(dropContainer, 6)
                utility.stroke(dropContainer, library.colors.border, 1, 0.9)
                
                local layout = utility.create("UIListLayout", {
                    Padding = UDim.new(0, 2), Parent = dropContainer
                })
                local pad = utility.create("UIPadding", {PaddingTop = 5, Parent = dropContainer})

                local isOpen = false
                btn.MouseButton1Click:Connect(function()
                    isOpen = not isOpen
                    if isOpen then
                        dropContainer.Size = UDim2.new(1, 0, 0, math.min(#list * 28, 200))
                        utility.tween(arrow, {0.2}, {Rotation = 180})
                    else
                        dropContainer.Size = UDim2.new(1, 0, 0, 0)
                        utility.tween(arrow, {0.2}, {Rotation = 0})
                    end
                end)

                for _, v in pairs(list) do
                    local opt = utility.create("TextButton", {
                        Size = UDim2.new(1, 0, 0, 26),
                        BackgroundTransparency = 1,
                        Text = v,
                        TextColor3 = library.colors.text,
                        Font = library.fontsub, TextSize = 13,
                        TextXAlignment = Enum.TextXAlignment.Left,
                        Parent = dropContainer
                    })
                    opt.MouseEnter:Connect(function()
                        opt.BackgroundColor3 = library.colors.accent
                        opt.TextTransparency = 0.5
                    end)
                    opt.MouseLeave:Connect(function()
                        opt.BackgroundColor3 = Color3.fromRGB(255,255,255)
                        opt.BackgroundTransparency = 1
                        opt.TextTransparency = 0
                    end)
                    opt.MouseButton1Click:Connect(function()
                        btn.Text = v
                        library.flags[flag] = v
                        callback(v)
                        isOpen = false
                        dropContainer.Size = UDim2.new(1, 0, 0, 0)
                        utility.tween(arrow, {0.2}, {Rotation = 0})
                    end)
                end
                
                layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
                     if isOpen then
                        dropContainer.Size = UDim2.new(1, 0, 0, math.min(layout.AbsoluteContentSize.Y + 10, 200))
                     end
                end)
            end

            -- TEXTBOX
            function secAPI:Textbox(text, flag, ph, callback)
                local tbFrame = utility.create("Frame", {
                    Size = UDim2.new(1, 0, 0, 40),
                    BackgroundTransparency = 1,
                    Parent = container
                })
                utility.create("TextLabel", {
                    Size = UDim2.new(1, 0, 0, 15),
                    BackgroundTransparency = 1,
                    Text = text,
                    TextColor3 = library.colors.text_sub,
                    Font = library.fontsub, TextSize = 12,
                    TextXAlignment = Enum.TextXAlignment.Left,
                    Parent = tbFrame
                })
                local box = utility.create("TextBox", {
                    Size = UDim2.new(1, 0, 0, 28),
                    Position = UDim2.new(0, 0, 0, 12),
                    BackgroundColor3 = library.colors.tertiary,
                    Text = "",
                    PlaceholderText = ph,
                    PlaceholderColor3 = library.colors.border_light,
                    TextColor3 = library.colors.text,
                    Font = library.fontsub, TextSize = 13,
                    Parent = tbFrame
                })
                utility.round(box, 5)
                utility.stroke(box, library.colors.border, 1, 0.8)
                box.FocusLost:Connect(function()
                    library.flags[flag] = box.Text
                    callback(box.Text)
                end)
            end

            return secAPI
        end
        return tabAPI
    end

    return windowAPI
end

return library
